<UserControl x:Class="VariantMeshEditor.Views.EditorViews.Animation.AnimationEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

             xmlns:animationviews="clr-namespace:VariantMeshEditor.Views.EditorViews.AnimationViews" 
             xmlns:animation="clr-namespace:VariantMeshEditor.Views.EditorViews.Animation"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../Styles/FullWidthTreeViewStyle.xaml" />
            </ResourceDictionary.MergedDictionaries>
           
            <AlternationConverter x:Key="AlternateForegroundConverter">
                <SolidColorBrush>Transparent</SolidColorBrush>
                <SolidColorBrush>LightGray</SolidColorBrush>
            </AlternationConverter>

        </ResourceDictionary>
    </UserControl.Resources>

    <DockPanel LastChildFill="true">
        <animationviews:AnimationPlayerView  DataContext="{Binding Path=AnimationPlayerViewModel}" DockPanel.Dock="Top"/>

        <TabControl DockPanel.Dock="Top">
            <TabItem Header="Animation Explorer"  IsSelected="{Binding AnimationExplorerViewModel.IsSelected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <DockPanel>
                    <Button Command="{Binding AnimationExplorerViewModel.AddNewAnimationCommand}" 
                            DockPanel.Dock="Bottom"
                            Content="Add Animation"/>

                    <TreeView  
                        AlternationCount="2"
                        ItemsSource="{Binding Path=AnimationExplorerViewModel.AnimationList, UpdateSourceTrigger=PropertyChanged}"  
                        ItemContainerStyle="{StaticResource FullWidthTreeViewStyle}"
                        Padding="1" 
                        BorderThickness="0">
                        <TreeView.ItemTemplate >
                            <HierarchicalDataTemplate>
                                <StackPanel MaxWidth="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ContentPresenter, AncestorLevel=1}}">
                                    <animation:AnimationExplorerNodeView 
                                                Background="{Binding RelativeSource={RelativeSource FindAncestor,  AncestorType={x:Type TreeViewItem}},
                                                Path=(ItemsControl.AlternationIndex),
                                                Converter={StaticResource AlternateForegroundConverter}}"/>
                                </StackPanel>
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                    
                </DockPanel>
            </TabItem>
            <TabItem Header="Fragment Explorer" IsSelected="{Binding AnimationFragmentExplorerViewModel.IsSelected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <animationviews:AnimationFragmentExplorerView DataContext="{Binding AnimationFragmentExplorerViewModel}"></animationviews:AnimationFragmentExplorerView>
            </TabItem>

            <TabItem Header="Animation Splicer" IsSelected="{Binding AnimationSplicerViewModel.IsSelected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <animation:AnimationSplicerView DataContext="{Binding AnimationSplicerViewModel}"></animation:AnimationSplicerView>
            </TabItem>
        </TabControl>


    </DockPanel>

</UserControl>
